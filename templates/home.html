<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plant Disease Detection</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>

<div class="container">

    <h1>Plant Disease Detection</h1>
    <p>Upload a leaf image to detect the disease</p>

    <form action="/upload/" method="POST" enctype="multipart/form-data">
        <input type="file" name="img" required>
        <button type="submit">Predict</button>
    </form>

    {% if result %}
    <div class="result-box">
        <h2>Prediction Result</h2>

        <img src="{{ imagepath }}" alt="Uploaded Image">

        <p><strong>Disease:</strong> {{name}}</p>
        <p><strong>Cause:</strong> {{cause}}</p>
        <p><strong>Cure:</strong> {{cure}}</p>

        
    </div>
    {% endif %}

    {% if result %}
    <div>
        <button onclick="playVoice('bn')">ðŸ”Š Bengali</button>
        <button onclick="playVoice('hi')">ðŸ”Š Hindi</button>
        <audio id="player" controls style="display:none;"></audio>
    </div>
    {% endif %}

    <script>
function playVoice(lang) {
    const text = `
Disease: {{ name }}
Cause: {{ cause }}
Cure: {{ cure }}
`;

    fetch("/speak", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({text: text, lang: lang})
    })
    .then(res => res.json())
    .then(data => {
        let player = document.getElementById("player");
        player.src = data.audio_url;
        player.style.display = "block";
        player.play();
    });
}
</script>



</div>

</body>
</html>
